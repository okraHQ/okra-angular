{"version":3,"file":"angular8-okra.js","sources":["ng://angular8-okra/lib/okra-token.ts","ng://angular8-okra/lib/angular8-okra.service.ts","ng://angular8-okra/lib/angular8-okra.component.ts","ng://angular8-okra/lib/angular8-okra.directive.ts","ng://angular8-okra/lib/angular8-okra.module.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\nexport const PUBLIC_KEY_TOKEN = new InjectionToken<string>('okra.publickey');\n","import { Injectable, Inject } from '@angular/core';\nimport { OkraOptions } from './OkraOptions';\nimport { PUBLIC_KEY_TOKEN } from './okra-token';\n\ninterface MyWindow extends Window {\n  okra: any\n}\ndeclare var window: MyWindow;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class Angular8OkraService {\n\n  okraPublicKey: string;\n\n  constructor(@Inject(PUBLIC_KEY_TOKEN) private token: string) {\n    this.okraPublicKey = token;\n  }\n\n  loadScript(): Promise<void> {\n    return new Promise(resolve => {\n      if (window.okra && typeof window.okra.create === 'function') {\n        resolve();\n        return;\n      }\n\n\n      const link = window.document.createElement('link');\n      window.document.head.appendChild(link);\n      link.setAttribute('rel', 'stylesheet');\n      link.setAttribute('type', 'text/css');\n      link.setAttribute('href', 'https://cdn.okra.ng/okra.css');\n\n      const script = window.document.createElement('script');\n      window.document.head.appendChild(script);\n      const onLoadFunc = () => {\n        script.removeEventListener('load', onLoadFunc);\n        resolve();\n      };\n      script.addEventListener('load', onLoadFunc);\n      script.setAttribute('src', 'https://cdn.okra.ng/okra.min.js');\n    });\n  }\n\n  getOkraOptions(obj: OkraOptions): OkraOptions {\n    const okraOptions: OkraOptions = {\n      env: obj.env,\n      url_env: obj.url_env,\n      clientName: obj.clientName,\n      key: obj.key,\n      record_id: obj.record_id,\n      callback_url: obj.callback_url,\n\n      \n      options: obj.options,\n      token: obj.token,\n      color: obj.color,\n      limit: obj.limit,\n      corporate: obj.corporate,\n      connectMessage: obj.connectMessage,\n      guarantors: obj.guarantors,\n      redirect_url: obj.redirect_url,\n      logo: obj.logo,\n      filter: obj.filter,\n      widget_success: obj.widget_success,\n      currency: obj.currency,\n      exp: obj.currency,\n      success_title: obj.success_title,\n      success_message: obj.success_message,\n\n\n      source: \"angular\",\n      products: obj.products,\n      onClose: obj.onClose,\n      onSuccess: obj.onSuccess,\n      onError: obj.onError\n      \n    };\n    return okraOptions;\n  }\n}\n","import { Component, OnInit, Input, EventEmitter, Output } from '@angular/core';\nimport { OkraOptions, PrivateOkraOptions } from './OkraOptions';\nimport { Angular8OkraService } from '../public-api';\n\ninterface MyWindow extends Window {\n  okra: any\n}\ndeclare var window: MyWindow;\n\n@Component({\n  selector: 'okra-button',\n  template: `<button [ngClass]=\"customClass\" [ngStyle]=\"customStyle\" (click)=\"initOkra()\"><ng-content></ng-content></button>`,\n})\n\nexport class Angular8OkraComponent {\n\n  @Input() env: string;\n  @Input() url_env: string;\n  @Input() clientName: string;\n  @Input() customStyle: {};\n  @Input() customClass: {};\n  @Input() record_id: string;\n  @Input() callback_url: string;\n  @Input() user: {};\n  @Input() products: string[];\n\n\n  @Input() token : string;\n  @Input() options : {};\n  @Input() source : string;\n  @Input() color : string;\n  @Input() limit : string;\n  @Input() corporate : null;\n  @Input() connectMessage : string;\n  @Input() guarantors : {};\n  @Input() redirect_url : string;\n  @Input() logo : string;\n  @Input() filter : {};\n  @Input() widget_success : string;\n  @Input() currency : string;\n  @Input() exp : string;\n  @Input() success_title : string;\n  @Input() success_message : string;\n\n\n  @Input() okraOptions: OkraOptions;\n  @Output() onClose: EventEmitter<any> = new EventEmitter<any>(); // tslint:disable-line\n  @Output() onSuccess: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onError: EventEmitter<any> = new EventEmitter<any>();\n  public _okraOptions: Partial<PrivateOkraOptions>; // tslint:disable-line\n  key: string;\n\n  constructor(public okraWidgetService: Angular8OkraService) {\n    this.key = okraWidgetService.okraPublicKey;\n   }\n  async initOkra() {\n    this.generateOptions(this);\n    await this.okraWidgetService.loadScript();\n    const okra = new window.okra.create();\n    okra.open(this._okraOptions);\n  }\n\n  generateOptions(obj: any) {\n    this._okraOptions = this.okraWidgetService.getOkraOptions(obj);\n    this._okraOptions.onClose = (json) => {\n      if (this.onClose.observers.length) {\n        this.onClose.emit();\n      } \n    };\n\n    this._okraOptions.onSuccess = (json) => {\n      if (this.onSuccess.observers.length) {\n          this.onSuccess.emit(json);\n      } \n    };\n    \n    this._okraOptions.onError = (json) => {\n      if (this.onError.observers.length) {\n        this.onError.emit(json);\n      }\n    };\n  }\n}\n","import { Directive, HostListener, Input, Output, EventEmitter } from '@angular/core';\nimport { OkraOptions, PrivateOkraOptions } from './OkraOptions';\nimport { Angular8OkraService } from '../public-api';\n\ninterface MyWindow extends Window {\n  okra: any\n}\ndeclare var window: MyWindow;\n\n@Directive({\n  selector: '[okraButton]'\n})\n\nexport class Angular8OkraDirective {\n\n  @Input() env: string;\n  @Input() url_env: string;\n  @Input() clientName: number;\n  @Input() record_id: string;\n  @Input() callback_url: string;\n  @Input() user: {};\n  @Input() products: string[];\n\n\n  @Input() token: string;\n  @Input() options: {};\n  @Input() source: string;\n  @Input() color: string;\n  @Input() limit: string;\n  @Input() corporate: null;\n  @Input() connectMessage: string;\n  @Input() guarantors: {};\n  @Input() redirect_url: string;\n  @Input() logo: string;\n  @Input() filter: {};\n  @Input() widget_success: string;\n  @Input() currency: string;\n  @Input() exp: string;\n  @Input() success_title: string;\n  @Input() success_message: string;\n\n\n  @Input() okraOptions: OkraOptions;\n  @Output() onClose: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onSuccess: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onError: EventEmitter<any> = new EventEmitter<any>();\n  public _okraOptions: Partial<PrivateOkraOptions>;\n  key: string;\n\n  constructor(public okraWidgetService: Angular8OkraService) {\n    this.key = okraWidgetService.okraPublicKey;\n  }\n  async initOkra() {\n    this.generateOptions(this);\n    await this.okraWidgetService.loadScript();\n    const okra = new window.okra.create();\n    okra.open(this._okraOptions);\n  }\n\n  generateOptions(obj: any) {\n    this._okraOptions = this.okraWidgetService.getOkraOptions(obj);\n\n    this._okraOptions.onClose = (json) => {\n      if (this.onClose.observers.length) {\n        this.onClose.emit(json);\n      }\n    };\n\n    this._okraOptions.onSuccess = (json) => {\n      if (this.onSuccess.observers.length) {\n        this.onSuccess.emit(json);\n      }\n    };\n\n    this._okraOptions.onError = (json) => {\n      if (this.onError.observers.length) {\n        this.onError.emit(json);\n      }\n    };\n  }\n\n  @HostListener('click')\n  async buttonClick() {\n    this.initOkra();\n  }\n\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { Angular8OkraComponent } from './angular8-okra.component';\nimport { Angular8OkraService } from './angular8-okra.service';\nimport { PUBLIC_KEY_TOKEN } from './okra-token';\nimport { Angular8OkraDirective } from './angular8-okra.directive';\n\n\n\n@NgModule({\n  declarations: [Angular8OkraComponent, Angular8OkraDirective],\n  imports: [\n    CommonModule\n  ],\n  exports: [Angular8OkraComponent,Angular8OkraDirective],\n  providers: [],\n})\nexport class Angular8OkraModule {\n  static forRoot(token: string): ModuleWithProviders {\n    return {\n      ngModule: Angular8OkraModule,\n      providers: [\n        Angular8OkraService,\n        { provide: PUBLIC_KEY_TOKEN, useValue: token }\n      ]\n    };\n }\n}\n"],"names":["MyWindow"],"mappings":"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"}